name: Close Pull Request
on:
  pull_request:
    types: [closed]

jobs:
  merge_job:
    #if: github.event.pull_request.merged == true
    runs-on: ubuntu-latest
    steps:
      - run: |
          echo PR #${{ github.event.number }} has been merged
      - name: Close infra PR
        run: |
          branch=${{ github.ref_name }}
          gh auth login --with-token <<< "${{ secrets.INFRA_TOKEN }}"
          gh pr close INFRA-$branch

  # close_job:
  #   if: github.event.pull_request.merged == false
  #   runs-on: ubuntu-latest
  #   steps:
  #     - run: |
  #         echo PR #${{ github.event.number }} has been closed without being merged
